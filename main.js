(()=>{"use strict";class e{constructor(e,t){this.name=e,this.number=t,this.tasks=[]}}class t{static getProjectName(){let e;return e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e}static getSelected(){let e;return e=null===localStorage.getItem("selectedId")?[]:JSON.parse(localStorage.getItem("selectedId")),e}static storeSelected(e){let s=t.getSelected();for(;s.length>0;)s.pop();s.push(e),localStorage.setItem("selectedId",JSON.stringify(s))}static storeProjectName(e){const s=t.getProjectName();s.push(e),localStorage.setItem("projects",JSON.stringify(s))}static countProject(){let e=Number(localStorage.getItem("lastProjectId"));return null===e?e=1:(e+=1,localStorage.setItem("lastProjectId",e)),e}static renderDefault(){if(0===t.getProjectName().length){const s=new e("default",0);t.storeProjectName(s)}const s=t.getProjectName(),n=document.getElementById("sideNavListchild"),c=document.createElement("li");c.innerHTML=`${s[0].name}`,c.classList.add("text-white","text-center","list-unstyled"),c.style.cursor="pointer",c.addEventListener("click",(()=>{t.synchro(c);const e=parseInt(t.getSelected()[0]);console.log(e);const s=document.getElementById("task-form");s.classList.remove("d-none"),s.classList.add("d-block")})),n.appendChild(c)}static showAlert(e,t){const s=document.createElement("div");s.className=`alert alert-${t} text-center`,s.appendChild(document.createTextNode(e)),document.querySelector("#section-1").appendChild(s)}static synchro(e){const t=document.getElementById("section-1");t.innerHTML="",t.classList.remove("d-none"),t.classList.add("d-block"),document.getElementById("add-class-header");const s=document.createElement("h4"),n=document.createElement("div"),c=document.createElement("div");c.innerHTML="+",c.style.cursor="pointer",n.innerHTML="Add task",n.appendChild(c),s.innerHTML=e.textContent,c.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")})),n.appendChild(c),t.appendChild(n),t.insertBefore(s,n)}static displayAddTask(){const e=document.getElementById("section-1");e.classList.remove("d-none"),e.classList.add("d-block")}static renderSelected(e){const s=t.getProjectName(),n=document.getElementById("sideNavListchild");n.innerHTML="",t.renderDefault(),s.forEach((t=>{if(0!=t.number){const s=document.createElement("li");s.innerHTML=`${t.name}<i class="fas ml-5 fa-trash-alt" ></i>`,s.classList.add("text-white","text-center","mt-4","list-unstyled"),s.id=t.number,parseInt(e[0])===parseInt(s.id)&&s.classList.add("text-danger"),s.style.cursor="pointer",n.appendChild(s),s.children[0].setAttribute("onclick",`removeProject(${t.number})`)}}))}static renderRefresh(){const e=t.getSelected();t.renderSelected(e)}static addProjectName(){const e=t.getProjectName(),s=document.getElementById("sideNavListchild");s.innerHTML="",t.renderDefault(),e.forEach((e=>{if(0!=e.number){const n=document.createElement("li");n.innerHTML=`${e.name}<i class="fas ml-5 fa-trash-alt" ></i>`,n.classList.add("text-white","text-center","mt-4","list-unstyled"),n.id=e.number,n.style.cursor="pointer",s.appendChild(n),s.addEventListener("click",(e=>{if("li"===e.target.tagName.toLowerCase()){t.displayAddTask(),t.storeSelected(e.target.id);const s=t.getSelected();t.renderSelected(s);const n=document.getElementById("task-form");n.classList.remove("d-block"),n.classList.add("d-none"),e.target.setAttribute("onclick",t.synchro(e.target))}})),n.children[0].setAttribute("onclick",`removeProject(${e.number})`)}}))}}class s{constructor(e,t,s,n,c){this.title=e,this.description=t,this.description=s,this.priority=n,this.now=c}static getTask(){let e;return e=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks")),e}static storeTask(e){const t=s.getTask();console.log(s.getTask()),t.push(e),localStorage.setItem("tasks",JSON.stringify(t))}}document.getElementById("section-1").classList.add("d-none"),window.removeProject=e=>{const s=t.getProjectName();s.forEach(((t,n)=>{t.number===e&&s.splice(n,1)})),document.getElementById(e).remove(),localStorage.setItem("projects",JSON.stringify(s)),t.addProjectName(),t.showAlert("Project Removed","success"),setTimeout((()=>{window.location.reload()}),3e3)},document.getElementById("project-form").addEventListener("submit",(s=>{s.preventDefault();const n=document.querySelector("#title").value;if(""===n)t.showAlert("Please fill in all fields","danger"),setTimeout((()=>{}),3e3);else{const s=new e(n,t.countProject());t.storeProjectName(s),t.addProjectName(),t.showAlert("project added successfuly","success"),setTimeout((()=>{window.location.reload()}),3e3)}})),document.getElementById("task-form").addEventListener("submit",(e=>{e.preventDefault();const n=document.querySelector("#titletwo").value,c=document.querySelector("#description").value,o=document.querySelector("#date").value,r=document.querySelector('input[name="priority"]:checked').value;if(""===n||""===c||""==o||null==r)t.showAlert("Please fill in all fields","danger"),setTimeout((()=>{window.location.reload()}),3e3);else{const e=t.getSelected(),a=t.getProjectName(),d=new s(n,c,o,r,Date.now().toString());s.storeTask(d),s.getTask(),0===e.length&&(console.log("yest it is"),a[0].tasks.push(s.getTask()[s.getTask().length-1]),t.storeProjectName(a)),t.showAlert("Task added successfuly","success"),setTimeout((()=>{window.location.reload()}),3e3)}}));const n=parseInt(t.getSelected()[0]);var c;c=n,t.getProjectName().forEach(((e,t)=>{if(t===c-1){const t=document.getElementById("section-1");t.classList.remove("d-none"),t.classList.add("d-block"),t.innerHTML="",document.getElementById("add-class-header");const s=document.createElement("h4"),n=document.createElement("div"),c=document.createElement("div");return c.innerHTML="+",c.style.cursor="pointer",n.innerHTML="Add task",n.appendChild(c),s.innerHTML=e.name,n.appendChild(c),t.appendChild(n),void t.insertBefore(s,n)}})),document.addEventListener("DOMContentLoaded",t.addProjectName(),t.renderRefresh())})();