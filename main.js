(()=>{"use strict";class e{constructor(e,t){this.name=e,this.number=t,this.tasks=[]}}class t{constructor(e,t,n,s,c,d){this.title=e,this.description=t,this.date=n,this.priority=s,this.now=c,this.createBy=d}static getTask(){let e;return e=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks")),e}static storeTask(e){const n=t.getTask();console.log(t.getTask()),n.push(e),localStorage.setItem("tasks",JSON.stringify(n))}}class n{static getProjectName(){let e;return e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e}static getSelected(){let e;return e=null===localStorage.getItem("selectedId")?[]:JSON.parse(localStorage.getItem("selectedId")),e}static storeSelected(e){let t=n.getSelected();for(;t.length>0;)t.pop();t.push(e),localStorage.setItem("selectedId",JSON.stringify(t))}static storeProjectName(e){const t=n.getProjectName();t.push(e),localStorage.setItem("projects",JSON.stringify(t))}static countProject(){let e=Number(localStorage.getItem("lastProjectId"));return null===e?e=1:(e+=1,localStorage.setItem("lastProjectId",e)),e}static addActiveProjectTask(){const e=t.getTask(),s=n.getProjectName(),c=parseInt(n.getSelected()[0])||0;console.log("yes"),e.forEach((e=>{if(console.log(e.createBy,s[c].name),e.createBy===s[c].name){const t=document.getElementById("section-1");t.classList.remove("d-none"),t.classList.add("d-block","mt-3");const n=document.createElement("h5");n.innerHTML=e.title;const s=document.createElement("div");s.classList.add("d-flex","flex-wrap"),n.classList.add("text-success","bg-grey","card-title");const c=document.createElement("div");c.classList.add("card");const d=document.createElement("div");d.classList.add("card-body");const o=document.createElement("p");o.innerHTML=e.date,o.classList.add("card-text");const a=document.createElement("p");a.innerHTML=e.description,document.getElementById("add-class-header");const r=document.createElement("h4"),l=document.createElement("div"),i=document.createElement("div");i.innerHTML="+",i.style.cursor="pointer",l.innerHTML="Add task",l.appendChild(i),r.innerHTML=e.createBy,i.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")})),d.appendChild(n),d.appendChild(a),d.appendChild(o),c.appendChild(d),s.appendChild(c),l.appendChild(i),t.appendChild(l),t.insertBefore(r,l),t.insertBefore(s,r)}}))}static renderDefault(){if(0===n.getProjectName().length){const t=new e("default",0);n.storeProjectName(t)}const t=n.getProjectName(),s=document.getElementById("sideNavListchild"),c=document.createElement("li");c.innerHTML=`${t[0].name}`,c.classList.add("text-white","text-center","list-unstyled"),c.style.cursor="pointer",c.addEventListener("click",(()=>{n.synchro(c);const e=parseInt(n.getSelected()[0])||0;console.log(t[e].name),n.addActiveProjectTask()})),s.appendChild(c),n.addActiveProjectTask()}static showAlert(e,t){const n=document.createElement("div");n.className=`alert alert-${t} text-center`,n.appendChild(document.createTextNode(e)),document.querySelector("#section-1").appendChild(n)}static synchro(e){const t=document.getElementById("section-1");t.innerHTML="",t.classList.remove("d-none"),t.classList.add("d-block"),document.getElementById("add-class-header");const n=document.createElement("h4"),s=document.createElement("div"),c=document.createElement("div");c.innerHTML="+",c.style.cursor="pointer",s.innerHTML="Add task",s.appendChild(c),n.innerHTML=e.textContent,c.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")})),s.appendChild(c),t.appendChild(s),t.insertBefore(n,s)}static displayAddTask(){const e=document.getElementById("section-1");e.classList.remove("d-none"),e.classList.add("d-block")}static renderSelected(e){const t=n.getProjectName(),s=document.getElementById("sideNavListchild");s.innerHTML="",n.renderDefault(),t.forEach((t=>{if(0!=t.number){const n=document.createElement("li");n.innerHTML=`${t.name}<i class="fas ml-5 fa-trash-alt" ></i>`,n.classList.add("text-white","text-center","mt-4","list-unstyled"),n.id=t.number,parseInt(e[0])===parseInt(n.id)&&n.classList.add("text-danger"),n.style.cursor="pointer",s.appendChild(n),n.children[0].setAttribute("onclick",`removeProject(${t.number})`)}}))}static renderRefresh(){const e=n.getSelected();n.renderSelected(e)}static addProjectName(){const e=n.getProjectName(),t=document.getElementById("sideNavListchild");t.innerHTML="",n.renderDefault(),e.forEach((e=>{if(0!=e.number){const s=document.createElement("li");s.innerHTML=`${e.name}<i class="fas ml-5 fa-trash-alt" ></i>`,s.classList.add("text-white","text-center","mt-4","list-unstyled"),s.id=e.number,s.style.cursor="pointer",t.appendChild(s),t.addEventListener("click",(e=>{if("li"===e.target.tagName.toLowerCase()){n.displayAddTask(),n.storeSelected(e.target.id);const t=n.getSelected();n.renderSelected(t);const s=document.getElementById("task-form");s.classList.remove("d-block"),s.classList.add("d-none"),e.target.setAttribute("onclick",n.synchro(e.target))}})),s.children[0].setAttribute("onclick",`removeProject(${e.number})`)}}))}}document.getElementById("section-1").classList.add("d-none"),window.removeProject=e=>{const t=n.getProjectName();t.forEach(((n,s)=>{n.number===e&&t.splice(s,1)})),document.getElementById(e).remove(),localStorage.setItem("projects",JSON.stringify(t)),n.addProjectName(),n.showAlert("Project Removed","success"),setTimeout((()=>{window.location.reload()}),3e3)},document.getElementById("project-form").addEventListener("submit",(t=>{t.preventDefault();const s=document.querySelector("#title").value;if(""===s)n.showAlert("Please fill in all fields","danger"),setTimeout((()=>{}),3e3);else{const t=new e(s,n.countProject());n.storeProjectName(t),n.addProjectName(),n.showAlert("project added successfuly","success"),setTimeout((()=>{window.location.reload()}),3e3)}})),document.getElementById("task-form").addEventListener("submit",(e=>{e.preventDefault();const s=document.querySelector("#titletwo").value,c=document.getElementById("description").value,d=document.querySelector("#date").value,o=document.querySelector('input[name="priority"]:checked').value;if(""===s||""===c||""==d||null==o)n.showAlert("Please fill in all fields","danger"),setTimeout((()=>{window.location.reload()}),3e3);else{const e=n.getSelected(),a=n.getProjectName();if(0===e.length||0===e[0].length){console.log("test succeed");const e=new t(s,c,d,o,Date.now().toString(),a[0].name);t.storeTask(e)}else{const n=new t(s,c,d,o,Date.now().toString(),a[parseInt(e[0])].name);t.storeTask(n)}n.showAlert("Task added successfuly","success"),setTimeout((()=>{window.location.reload()}),3e3)}}));const s=parseInt(n.getSelected()[0]);var c;c=s,n.getProjectName().forEach(((e,t)=>{if(t===c){const t=document.getElementById("section-1");t.classList.remove("d-none"),t.classList.add("d-block"),t.innerHTML="",document.getElementById("add-class-header");const n=document.createElement("h4"),s=document.createElement("div"),c=document.createElement("div");return c.innerHTML="+",c.style.cursor="pointer",s.innerHTML="Add task",s.appendChild(c),n.innerHTML=e.name,s.appendChild(c),t.appendChild(s),void t.insertBefore(n,s)}})),document.addEventListener("DOMContentLoaded",n.addProjectName(),n.renderRefresh())})();