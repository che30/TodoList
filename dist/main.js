(()=>{"use strict";class e{constructor(e,t){this.name=e,this.number=t}}class t{constructor(e,t,n,s,c,d){this.title=e,this.description=t,this.date=n,this.priority=s,this.now=c,this.createBy=d}static getTask(){let e;return e=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks")),e}static storeTask(e){const n=t.getTask();n.push(e),localStorage.setItem("tasks",JSON.stringify(n))}}class n{static delay(){setTimeout((()=>{window.location.reload()}),3e3)}static getProjectName(){let e;return e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e}static getSelected(){let e;return e=null===localStorage.getItem("selectedId")?[]:JSON.parse(localStorage.getItem("selectedId")),e}static storeSelected(e){let t=n.getSelected();for(;t.length>0;)t.pop();t.push(e),localStorage.setItem("selectedId",JSON.stringify(t))}static storeProjectName(e){const t=n.getProjectName();t.push(e),localStorage.setItem("projects",JSON.stringify(t))}static countProject(){let e=Number(localStorage.getItem("lastProjectId"));return null===e?e=1:(e+=1,localStorage.setItem("lastProjectId",e)),e}static addActiveProjectTask(){const e=t.getTask(),s=n.getProjectName();let c=parseInt(n.getSelected()[0])||0;var d,a,o;if(!c)if(c=0,0!=e.length){e.forEach((e=>{if(d=document.getElementById("section-1"),e.createBy===s[c].name){d.classList.remove("d-none"),d.classList.add("d-block","mt-3");const t=document.createElement("h5");t.innerHTML=e.title,(a=document.createElement("div")).classList.add("d-flex","flex-wrap"),t.classList.add("text-success","bg-grey","card-title");const n=document.createElement("div");n.classList.add("card");const s=document.createElement("div");s.classList.add("card-body");const c=document.createElement("p");c.innerHTML=e.date,c.classList.add("card-text");const r=document.createElement("p");r.innerHTML=e.description,document.getElementById("add-class-header"),(o=document.createElement("h4")).innerHTML=e.createBy,o.classList.add("text-center"),s.appendChild(t),s.appendChild(r),s.appendChild(c),n.appendChild(s),a.appendChild(n),d.appendChild(a)}}));const t=document.createElement("div");t.innerHTML="+",t.style.cursor="pointer",d.appendChild(a),d.insertBefore(o,d.firstChild),d.appendChild(t),t.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")}))}else{(d=document.getElementById("section-1")).classList.remove("d-none"),d.classList.add("d-block","mt-3");const e=document.createElement("div"),t=document.createElement("div");t.innerHTML="default",t.classList.add("text-center"),e.innerHTML="+",e.style.cursor="pointer",d.appendChild(t),d.appendChild(e),e.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")}))}}static renderDefault(){if(0===n.getProjectName().length){const t=new e("default",0);n.storeProjectName(t)}const t=n.getProjectName(),s=document.getElementById("sideNavListchild"),c=document.createElement("li");c.innerHTML=`${t[0].name}`,c.classList.add("text-white","text-center","list-unstyled"),c.style.cursor="pointer",c.addEventListener("click",(()=>{n.synchro(c),document.getElementById("section-1").innerHTML="",n.addActiveProjectTask()})),s.appendChild(c),document.getElementById("section-1").innerHTML="",n.addActiveProjectTask()}static showAlert(e,t){const n=document.createElement("div");n.className=`alert alert-${t} text-center`,n.appendChild(document.createTextNode(e)),document.querySelector("#section-1").appendChild(n)}static synchro(e){const t=document.getElementById("section-1");t.innerHTML="",t.classList.remove("d-none"),t.classList.add("d-block"),document.getElementById("add-class-header");const n=document.createElement("h4"),s=document.createElement("div"),c=document.createElement("div");c.innerHTML="+",c.style.cursor="pointer",s.innerHTML="Add task",s.appendChild(c),n.innerHTML=e.textContent,c.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")})),s.appendChild(c),t.appendChild(s),t.insertBefore(n,s)}static displayAddTask(){const e=document.getElementById("section-1");e.classList.remove("d-none"),e.classList.add("d-block")}static renderSelected(e){const t=n.getProjectName(),s=document.getElementById("sideNavListchild");s.innerHTML="",n.renderDefault(),t.forEach((t=>{if(0!=t.number){const n=document.createElement("li");n.innerHTML=`${t.name}<i class="fas ml-5 fa-trash-alt" ></i>`,n.classList.add("text-white","text-center","mt-4","list-unstyled"),n.id=t.number,parseInt(e[0])===parseInt(n.id)&&n.classList.add("text-danger"),n.style.cursor="pointer",s.appendChild(n),n.children[0].setAttribute("onclick",`removeProject(${t.number})`)}}))}static renderRefresh(){const e=n.getSelected();n.renderSelected(e)}static addProjectName(){const e=n.getProjectName(),t=document.getElementById("sideNavListchild");t.innerHTML="",n.renderDefault(),e.forEach((e=>{if(0!=e.number){const s=document.createElement("li");s.innerHTML=`${e.name}<i class="fas ml-5 fa-trash-alt" ></i>`,s.classList.add("text-white","text-center","mt-4","list-unstyled"),s.id=e.number,s.style.cursor="pointer",t.appendChild(s),t.addEventListener("click",(e=>{if("li"===e.target.tagName.toLowerCase()){n.displayAddTask(),n.storeSelected(e.target.id);const t=n.getSelected();n.renderSelected(t);const s=document.getElementById("task-form");s.classList.remove("d-block"),s.classList.add("d-none"),e.target.setAttribute("onclick",n.synchro(e.target))}})),s.children[0].setAttribute("onclick",`removeProject(${e.number})`)}}))}}function s(e){n.getProjectName().forEach(((t,n)=>{if(n===e){console.log(n);const e=document.getElementById("section-1");e.classList.remove("d-none"),e.classList.add("d-block"),e.innerHTML="",document.getElementById("add-class-header");const s=document.createElement("h4"),c=document.createElement("div"),d=document.createElement("div");return d.innerHTML="+",d.style.cursor="pointer",c.innerHTML="Add task",c.appendChild(d),s.innerHTML=t.name,c.appendChild(d),e.appendChild(c),void e.insertBefore(s,c)}}))}document.getElementById("section-1").classList.add("d-none"),window.removeProject=e=>{const t=n.getProjectName();t.forEach(((n,s)=>{n.number===e&&t.splice(s,1)})),document.getElementById(e).remove(),localStorage.setItem("projects",JSON.stringify(t)),n.addProjectName(),n.showAlert("Project Removed","success"),setTimeout((()=>{window.location.reload()}),3e3)},document.getElementById("project-form").addEventListener("submit",(t=>{t.preventDefault();const s=document.querySelector("#title").value;if(""===s)n.showAlert("Please fill in all fields","danger"),n.delay();else{const t=new e(s,n.countProject());n.storeProjectName(t),n.addProjectName(),n.showAlert("project added successfuly","success"),setTimeout((()=>{window.location.reload()}),3e3)}})),document.getElementById("task-form").addEventListener("submit",(e=>{e.preventDefault();const s=document.querySelector("#titletwo").value,c=document.getElementById("description").value,d=document.querySelector("#date").value,a=document.querySelector('input[name="priority"]:checked').value;if(""===s||""===c||""==d||null==a)n.showAlert("Please fill in all fields","danger"),setTimeout((()=>{window.location.reload()}),3e3);else{const e=n.getSelected(),o=n.getProjectName();if(0===e.length||0===e[0].length){const e=new t(s,c,d,a,Date.now().toString(),o[0].name);t.storeTask(e)}else{const n=new t(s,c,d,a,Date.now().toString(),o[parseInt(e[0])].name);t.storeTask(n)}n.showAlert("Task added successfuly","success"),n.delay()}})),n.renderDefault(),n.addActiveProjectTask();const c=parseInt(n.getSelected()[0]);s(c),console.log(c),document.addEventListener("DOMContentLoaded",n.addProjectName(),n.renderRefresh(),s(c))})();