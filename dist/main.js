(()=>{"use strict";class e{constructor(e,t){this.name=e,this.number=t,this.tasks=[]}}class t{static delay(){setTimeout((()=>{window.location.reload()}),3e3)}static setSelected(){return t.getSelected()}static getProjectName(){let e;return e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e}static getSelected(){let e;return e=null===localStorage.getItem("selectedId")?[]:JSON.parse(localStorage.getItem("selectedId")),e}static storeSelected(e){const s=t.getSelected();s.push(e),localStorage.setItem("selectedId",JSON.stringify(s))}static countProject(){let e=Number(localStorage.getItem("lastProjectId"));return null===e?e=1:(e+=1,localStorage.setItem("lastProjectId",e)),e}static storeProjectName(e){const s=t.getProjectName();s.push(e),localStorage.setItem("projects",JSON.stringify(s))}static synchro(e){const s=Number(e.id),a=t.getProjectName()[s],c=document.createElement("div"),n=document.getElementById("section-1"),o=document.getElementById("add-class-header");o.innerHTML=e.textContent,n.innerHTML="",n.innerHTML="Todo list",o.innerHTML=e.textContent,n.appendChild(o),a.tasks&&a.tasks.forEach((e=>{const t=document.createElement("h5");t.innerHTML=`task title: ${e.title}`,c.classList.add("d-flex","flex-wrap","justify-content-around"),c.id=e.id,t.classList.add("text-success","bg-grey","card-title");const s=document.createElement("div");s.classList.add("card");const a=document.createElement("div");a.classList.add("card-body");const l=document.createElement("p");l.innerHTML=`task date: ${e.date}`;const d=document.createElement("p");d.innerHTML=`task priority: ${e.priority}`;const r=document.createElement("div"),i=document.createElement("span");i.innerHTML='<i class="fas fa-edit"></i>',i.id=e.now,i.setAttribute("onclick",`editTask(${e.now})`);const m=document.createElement("span");m.innerHTML='<i class="fas ml-5 fa-trash-alt" ></i>',m.id=e.now,m.setAttribute("onclick",`removeTask(${e.now})`),m.classList.add("text-danger"),l.classList.add("card-text");const u=document.createElement("p");u.innerHTML=`task decription: ${e.description}`,o.innerHTML=e.createBy,o.classList.add("text-center"),r.appendChild(i),r.appendChild(m),a.appendChild(t),a.appendChild(u),a.appendChild(l),a.appendChild(d),a.appendChild(r),s.appendChild(a),c.appendChild(s),n.appendChild(c)})),n.classList.remove("d-none"),n.classList.add("d-block");const l=document.getElementById("plus");l.style.display="block",l.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")}))}static renderDefault(){if(0===t.getProjectName().length){const s=new e("default",0);t.storeProjectName(s)}const s=t.getProjectName(),a=(document.getElementById("sideNavListchild"),document.createElement("li"));return a.innerHTML=`${s[0].name}`,a.id="0",a.classList.add("text-white","text-center","list-unstyled"),a.style.cursor="pointer",a.addEventListener("click",(()=>{t.getSelected(),t.setSelected(0),t.synchro(a)})),a}static addProjectName(){const e=t.getProjectName(),s=document.getElementById("sideNavListchild");s.innerHTML="",s.appendChild(t.renderDefault()),e.forEach((e=>{if(0!==e.number){const a=document.createElement("li");a.innerHTML=`${e.name}<i class="fas ml-5 fa-trash-alt" ></i>`,a.classList.add("text-white","text-center","mt-4","list-unstyled"),a.id=e.number,a.style.cursor="pointer",s.appendChild(a),s.addEventListener("click",(e=>{if("li"===e.target.tagName.toLowerCase()&&0!==e.target.id){e.target.id;const s=t.getSelected();t.storeSelected(s),localStorage.setItem("selectedId",JSON.stringify(s)),e.target.setAttribute("onclick",t.synchro(e.target))}})),a.children[0].setAttribute("onclick",`removeProject(${e.number})`)}}))}static showAlert(e,t){const s=document.createElement("div");s.className=`alert alert-${t} text-center`;const a=document.getElementById("alert");s.appendChild(document.createTextNode(e)),a.appendChild(s)}}class s{constructor(e,t,s,a,c,n){this.title=e,this.description=t,this.date=s,this.priority=a,this.now=c,this.createBy=n}static getTask(){let e;return e=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks")),e}static storeTask(e){const t=s.getTask();t.push(e),localStorage.setItem("tasks",JSON.stringify(t))}}window.removeProject=e=>{const s=t.getProjectName();t.getSelected(),s.forEach(((t,a)=>{t.number===e&&s.splice(a,1)})),document.getElementById(e).remove(),localStorage.setItem("projects",JSON.stringify(s)),t.addProjectName(),t.showAlert("Project Removed","success"),t.delay()},window.removeTask=e=>{const a=s.getTask(),c=(t.getSelected(),t.getProjectName());c.map((t=>{t.tasks.map(((s,a)=>{Number(s.now)===e&&(t.tasks.splice(a,1),localStorage.setItem("projects",JSON.stringify(c)))}))})),a.map(((s,c)=>{Number(s.now)===e&&(a.splice(c,1),document.getElementById(e).parentNode.parentNode.parentNode.remove(),localStorage.setItem("tasks",JSON.stringify(a)),t.showAlert("Task Removed","success"),t.delay())}))},window.editTask=e=>{let a;const c=s.getTask();c.map(((t,s)=>{Number(t.now)===e&&(a=t,c.splice(s,1),localStorage.setItem("tasks",JSON.stringify(c)))})),t.getSelected();const n=t.getProjectName();n.map((t=>{t.tasks.map(((s,a)=>{Number(s.now)===e&&(t.tasks.splice(a,1),localStorage.setItem("projects",JSON.stringify(n)))}))})),document.getElementById(e),document.getElementById("task-form").classList.remove("d-none"),document.getElementById("task-form").classList.add("d-block"),document.querySelector("#titletwo").value=a.title,document.getElementById("description").value=a.description,document.querySelector("#date").value=a.date},document.getElementsByClassName("close")[0].onclick=function(){document.getElementById("task-form").classList.remove("d-block"),document.getElementById("task-form").classList.add("d-none")},document.getElementById("project-form").addEventListener("submit",(s=>{s.preventDefault();const a=document.querySelector("#title").value;if(""===a)t.showAlert("Please fill in all fields","danger"),t.delay();else{const s=new e(a,t.countProject());t.storeProjectName(s),t.addProjectName(),t.showAlert("project added successfuly","success"),t.delay()}})),document.getElementById("task-form").addEventListener("submit",(e=>{e.preventDefault();const a=document.querySelector("#titletwo"),c=document.getElementById("description"),n=document.querySelector("#date"),o=document.querySelector('input[name="priority"]:checked');if(""===a.value||""===c.value||""===n.value||null===o)t.showAlert("Please fill in all fields","danger"),t.delay();else{const e=t.getSelected(),l=t.getProjectName();if(0===Number(e[e.length-1])){const t=new s(a.value,c.value,n.value,o,Date.now().toString(),l[0].name);s.storeTask(t),l[Number(e[e.length-1])].tasks.push(t),localStorage.setItem("projects",JSON.stringify(l))}else{const t=new s(a.value,c.value,n.value,o,Date.now().toString(),l[Number(e[e.length-1])].name);s.storeTask(t),l[Number(e[e.length-1])].tasks.push(t),localStorage.setItem("projects",JSON.stringify(l))}t.showAlert("Task added successfuly","success"),t.delay()}})),t.getSelected(),document.addEventListener("DOMContentLoaded",t.addProjectName())})();