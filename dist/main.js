(()=>{"use strict";class e{constructor(e,t){this.name=e,this.number=t}}class t{constructor(e,t,s,n,c,d){this.title=e,this.description=t,this.date=s,this.priority=n,this.now=c,this.createBy=d}static getTask(){let e;return e=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks")),e}static storeTask(e){const s=t.getTask();s.push(e),localStorage.setItem("tasks",JSON.stringify(s))}}class s{static delay(){setTimeout((()=>{window.location.reload()}),3e3)}static getProjectName(){let e;return e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e}static getSelected(){let e;return e=null===localStorage.getItem("selectedId")?[]:JSON.parse(localStorage.getItem("selectedId")),e}static storeSelected(e){const t=s.getSelected();for(;t.length>0;)t.pop();t.push(e),localStorage.setItem("selectedId",JSON.stringify(t))}static storeProjectName(e){const t=s.getProjectName();t.push(e),localStorage.setItem("projects",JSON.stringify(t))}static countProject(){let e=Number(localStorage.getItem("lastProjectId"));return null===e?e=1:(e+=1,localStorage.setItem("lastProjectId",e)),e}static addActiveProjectTask(){const e=t.getTask(),n=s.getProjectName();let c=parseInt(s.getSelected()[0])||0;c=c||0;const d=document.getElementById("section-1");d.innerHTML="";const a=document.createElement("div"),o=document.createElement("h4");if(0!=e.length){e.forEach((e=>{if(e.createBy===n[c].name){d.classList.remove("d-none"),d.classList.add("d-block","mt-3");const t=document.createElement("h5");t.innerHTML=e.title,a.classList.add("d-flex","flex-wrap","justify-content-around"),t.classList.add("text-success","bg-grey","card-title");const s=document.createElement("div");s.classList.add("card");const n=document.createElement("div");n.classList.add("card-body");const c=document.createElement("p");c.innerHTML=e.date;const l=document.createElement("div"),r=document.createElement("span");r.innerHTML='<i class="fas fa-edit"></i>',r.id=e.now,r.setAttribute("onclick",`editTask(${e.now})`);const i=document.createElement("span");i.innerHTML='<i class="fas ml-5 fa-trash-alt" ></i>',i.id=e.now,i.setAttribute("onclick",`removeTask(${e.now})`),i.classList.add("text-danger"),c.classList.add("card-text");const m=document.createElement("p");m.innerHTML=e.description,document.getElementById("add-class-header"),o.innerHTML=e.createBy,o.classList.add("text-center"),l.appendChild(r),l.appendChild(i),n.appendChild(t),n.appendChild(m),n.appendChild(c),n.appendChild(l),s.appendChild(n),a.appendChild(s),d.appendChild(a)}}));const t=document.createElement("div");t.innerHTML="+",t.style.cursor="pointer",d.appendChild(a),d.insertBefore(o,d.firstChild),d.appendChild(t),t.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")}))}}static renderDefault(){if(0===s.getProjectName().length){const t=new e("default",0);s.storeProjectName(t)}const t=s.getProjectName(),n=document.getElementById("sideNavListchild"),c=document.createElement("li");c.innerHTML=`${t[0].name}`,c.classList.add("text-white","text-center","list-unstyled"),c.style.cursor="pointer",c.addEventListener("click",(()=>{s.synchro(c),s.addActiveProjectTask()})),n.appendChild(c),document.getElementById("section-1").innerHTML="",s.addActiveProjectTask()}static showAlert(e,t){const s=document.createElement("div");s.className=`alert alert-${t} text-center`,s.appendChild(document.createTextNode(e)),document.querySelector("#section-1").appendChild(s)}static synchro(e){const t=document.getElementById("section-1");t.innerHTML="",t.classList.remove("d-none"),t.classList.add("d-block"),document.getElementById("add-class-header");const s=document.createElement("h4"),n=document.createElement("div"),c=document.createElement("div");c.innerHTML="+",c.style.cursor="pointer",n.innerHTML="Add task",n.appendChild(c),s.innerHTML=e.textContent,c.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")})),n.appendChild(c),t.appendChild(n),t.insertBefore(s,n)}static displayAddTask(){const e=document.getElementById("section-1");e.classList.remove("d-none"),e.classList.add("d-block")}static renderSelected(e){const t=s.getProjectName(),n=document.getElementById("sideNavListchild");n.innerHTML="",s.renderDefault(),t.forEach((t=>{if(0!=t.number){const c=document.createElement("li");c.innerHTML=`${t.name}<i class="fas ml-5 fa-trash-alt" ></i>`,c.classList.add("text-white","text-center","mt-4","list-unstyled"),c.id=t.number,parseInt(e[0])===parseInt(c.id)&&(c.classList.add("text-danger"),s.synchro(c)),c.style.cursor="pointer",n.appendChild(c),c.children[0].setAttribute("onclick",`removeProject(${t.number})`)}}))}static renderRefresh(){const e=s.getSelected();s.renderSelected(e)}static addProjectName(){const e=s.getProjectName(),t=document.getElementById("sideNavListchild");t.innerHTML="",e.forEach((e=>{if(0!=e.number){const n=document.createElement("li");n.innerHTML=`${e.name}<i class="fas ml-5 fa-trash-alt" ></i>`,n.classList.add("text-white","text-center","mt-4","list-unstyled"),n.id=e.number,n.style.cursor="pointer",t.appendChild(n),t.addEventListener("click",(e=>{if("li"===e.target.tagName.toLowerCase()){s.displayAddTask(),s.storeSelected(e.target.id);const t=s.getSelected();s.renderSelected(t);const n=document.getElementById("task-form");n.classList.remove("d-block"),n.classList.add("d-none"),e.target.setAttribute("onclick",s.synchro(e.target))}})),n.children[0].setAttribute("onclick",`removeProject(${e.number})`)}}))}}document.getElementById("section-1").classList.add("d-none"),window.removeProject=e=>{const t=s.getProjectName(),n=s.getSelected();n.pop(),s.storeSelected(n),t.forEach(((s,n)=>{s.number===e&&t.splice(n,1)})),document.getElementById(e).remove(),localStorage.setItem("projects",JSON.stringify(t)),s.addProjectName(),s.showAlert("Project Removed","success"),s.delay()},window.removeTask=e=>{const n=t.getTask();n.forEach(((t,c)=>{parseInt(t.now)===e&&(n.splice(c,1),document.getElementById(e).parentNode.parentNode.parentNode.remove(),localStorage.setItem("tasks",JSON.stringify(n)),s.showAlert("Task Removed","success"),s.delay())}))},window.editTask=e=>{let s,n;const c=t.getTask();c.forEach(((t,d)=>{parseInt(t.now)===e&&(console.log("success"),s=e,n=t,c.splice(d,1),localStorage.setItem("tasks",JSON.stringify(c)))})),document.getElementById(e),document.getElementById("task-form").classList.remove("d-none"),document.getElementById("task-form").classList.add("d-block"),document.querySelector("#titletwo").value=n.title,document.getElementById("description").value=n.description,document.querySelector("#date").value=n.date},document.getElementsByClassName("close")[0].onclick=function(){document.getElementById("task-form").classList.remove("d-block"),document.getElementById("task-form").classList.add("d-none")},document.getElementById("project-form").addEventListener("submit",(t=>{t.preventDefault();const n=document.querySelector("#title").value;if(""===n)s.showAlert("Please fill in all fields","danger"),s.delay();else{const t=new e(n,s.countProject());s.storeProjectName(t),s.addProjectName(),s.showAlert("project added successfuly","success"),setTimeout((()=>{window.location.reload()}),3e3)}})),document.getElementById("task-form").addEventListener("submit",(e=>{e.preventDefault();const n=document.querySelector("#titletwo").value,c=document.getElementById("description").value,d=document.querySelector("#date").value,a=document.querySelector('input[name="priority"]:checked').value;if(""===n||""===c||""==d||null==a)s.showAlert("Please fill in all fields","danger"),setTimeout((()=>{window.location.reload()}),3e3);else{const e=s.getSelected(),o=s.getProjectName();if(0===e.length||0===e[0].length){const e=new t(n,c,d,a,Date.now().toString(),o[0].name);t.storeTask(e)}else{const s=new t(n,c,d,a,Date.now().toString(),o[parseInt(e[0])].name);t.storeTask(s)}s.showAlert("Task added successfuly","success"),s.delay()}})),document.addEventListener("DOMContentLoaded",s.addProjectName(),s.renderRefresh(),s.addActiveProjectTask())})();