(()=>{"use strict";class e{static getProjectName(){let e;return e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e}static getSelected(){let e;return e=null===localStorage.getItem("selectedId")?[]:JSON.parse(localStorage.getItem("selectedId")),e}static storeSelected(t){let n=e.getSelected();for(;n.length>0;)n.pop();n.push(t),localStorage.setItem("selectedId",JSON.stringify(n))}static storeProjectName(t){const n=e.getProjectName();n.push(t),localStorage.setItem("projects",JSON.stringify(n))}static countProject(){let e=Number(localStorage.getItem("lastProjectId"));return null===e?e=1:(e+=1,localStorage.setItem("lastProjectId",e)),e}static renderDefault(){if(0===e.getProjectName().length){const t=new Project("default",0);e.storeProjectName(t)}const t=e.getProjectName(),n=document.getElementById("sideNavListchild"),s=document.createElement("li");s.innerHTML=`${t[0].name}`,s.classList.add("text-white","text-center","list-unstyled"),s.style.cursor="pointer",n.appendChild(s)}static showAlert(e,t){const n=document.createElement("div");n.className=`alert alert-${t} text-center`,n.appendChild(document.createTextNode(e)),document.querySelector("#section-1").appendChild(n)}static synchro(e){const t=document.getElementById("section-1");t.innerHTML="",t.classList.remove("d-none"),t.classList.add("d-block"),document.getElementById("add-class-header");const n=document.createElement("h4"),s=document.createElement("div"),c=document.createElement("div");c.innerHTML="+",c.style.cursor="pointer",s.innerHTML="Add task",s.appendChild(c),n.innerHTML=e.textContent,c.addEventListener("click",(()=>{const e=document.getElementById("task-form");e.classList.remove("d-none"),e.classList.add("d-block")})),s.appendChild(c),t.appendChild(s),t.insertBefore(n,s)}static displayAddTask(){const e=document.getElementById("section-1");e.classList.remove("d-none"),e.classList.add("d-block")}static renderSelected(t){const n=e.getProjectName(),s=document.getElementById("sideNavListchild");s.innerHTML="",e.renderDefault(),n.forEach((e=>{if(0!=e.number){const n=document.createElement("li");n.innerHTML=`${e.name}<i class="fas ml-5 fa-trash-alt" ></i>`,n.classList.add("text-white","text-center","mt-4","list-unstyled"),n.id=e.number,parseInt(t[0])===parseInt(n.id)&&n.classList.add("text-danger"),n.style.cursor="pointer",s.appendChild(n),n.children[0].setAttribute("onclick",`removeProject(${e.number})`)}}))}static renderRefresh(){const t=e.getSelected();e.renderSelected(t)}static addProjectName(){const t=e.getProjectName(),n=document.getElementById("sideNavListchild");n.innerHTML="",e.renderDefault(),t.forEach((t=>{if(0!=t.number){const s=document.createElement("li");s.innerHTML=`${t.name}<i class="fas ml-5 fa-trash-alt" ></i>`,s.classList.add("text-white","text-center","mt-4","list-unstyled"),s.id=t.number,s.style.cursor="pointer",n.appendChild(s),n.addEventListener("click",(t=>{if("li"===t.target.tagName.toLowerCase()){e.displayAddTask(),e.storeSelected(t.target.id);const n=e.getSelected();e.renderSelected(n);const s=document.getElementById("task-form");s.classList.remove("d-block"),s.classList.add("d-none"),t.target.setAttribute("onclick",e.synchro(t.target))}})),s.children[0].setAttribute("onclick",`removeProject(${t.number})`)}}))}}class t{constructor(e,t){this.name=e,this.number=t,this.tasks=[]}}document.getElementById("section-1").classList.add("d-none"),window.removeProject=t=>{const n=e.getProjectName();n.forEach(((e,s)=>{e.number===t&&n.splice(s,1)})),document.getElementById(t).remove(),localStorage.setItem("projects",JSON.stringify(n)),e.addProjectName(),e.showAlert("Project Removed","success"),setTimeout((()=>{window.location.reload()}),3e3)},document.getElementById("project-form").addEventListener("submit",(n=>{n.preventDefault();const s=document.querySelector("#title").value;if(""===s)e.showAlert("Please fill in all fields","danger"),setTimeout((()=>{}),3e3);else{const n=new t(s,e.countProject());e.storeProjectName(n),e.addProjectName(),e.showAlert("project added successfuly","success"),setTimeout((()=>{window.location.reload()}),3e3)}})),document.getElementById("task-form").addEventListener("submit",(t=>{t.preventDefault();const n=document.querySelector("#titletwo").value,s=document.querySelector("#description").value,c=document.querySelector("#date").value,o=document.querySelector('input[name="priority"]:checked').value;if(""===n||""===s||""==c||null==o)e.showAlert("Please fill in all fields","danger"),setTimeout((()=>{window.location.reload()}),3e3);else{const t=new Task(n,s,c,Task.countTask(),o);Task.storeTask(t),e.showAlert("Task added successfuly","success"),setTimeout((()=>{window.location.reload()}),3e3)}}));const n=parseInt(e.getSelected()[0]);var s;s=n,e.getProjectName().forEach(((e,t)=>{if(console.log(e.name,t),t===s-1){const t=document.getElementById("section-1");t.classList.remove("d-none"),t.classList.add("d-block"),t.innerHTML="",document.getElementById("add-class-header");const n=document.createElement("h4"),s=document.createElement("div"),c=document.createElement("div");return c.innerHTML="+",c.style.cursor="pointer",s.innerHTML="Add task",s.appendChild(c),n.innerHTML=e.name,s.appendChild(c),t.appendChild(s),void t.insertBefore(n,s)}})),document.addEventListener("DOMContentLoaded",e.addProjectName(),e.renderRefresh())})();